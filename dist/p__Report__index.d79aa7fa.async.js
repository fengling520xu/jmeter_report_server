"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[307],{26234:function(M,h,n){n.d(h,{$l:function(){return S},Y6:function(){return p},mr:function(){return E},yl:function(){return v}});var I=n(30381),g=n.n(I);function p(s,o){var a=g()().valueOf(),u=g()().subtract(s,o).valueOf();return{currentStamp:a,agoTimestamp:u}}function E(s){if(s<=60)return"".concat(s,"s");var o=Math.floor(s/60),a=s%60;return"".concat(o,"m").concat(a,"s")}var v=function(o,a){return o.map(function(u){if(u.dataIndex==="project"){var r={},P=a.project;P.map(function(d){r[d]={text:d}}),u.valueEnum=r}if(u.dataIndex==="env"){var x={},y=a.env;y.map(function(d){x[d]={text:d}}),u.valueEnum=x}}),o},S=function(o,a){var u={};return o.map(function(r){r.hasOwnProperty(a)&&(u[r[a]]={text:r[a]})}),u}},57008:function(M,h,n){n.r(h),n.d(h,{default:function(){return D}});var I=n(67294),g=n(17061),p=n.n(g),E=n(42122),v=n.n(E),S=n(17156),s=n.n(S),o=n(27424),a=n.n(o),u=n(25862),r=n(20550),P=n(65360),x=n(71577),y=n(22524),d=n(26234),j=n(75516),t=n(85893),C=function(){var A=(0,I.useRef)(),L=(0,j.useSearchParams)(),V=a()(L,1),z=V[0],K=(0,j.useModel)("base"),W=K.baseInfo,$=z.get("show")==="delete",G=[{dataIndex:"id",title:"\u6784\u5EFAID",align:"center",width:80,search:!1,render:function(l,e){var f="/detail/".concat(e.id);return(0,t.jsxs)(j.Link,{to:f,children:["#",e.id]})}},{title:"\u6240\u5C5E\u9879\u76EE",dataIndex:"project",align:"center",valueType:"select"},{title:"\u6267\u884C\u73AF\u5883",dataIndex:"env",align:"center"},{title:"\u6784\u5EFA\u65B9\u5F0F",dataIndex:"type",align:"center",valueEnum:{1:{text:"\u624B\u52A8"},0:{text:"\u81EA\u52A8"}},render:function(l,e){return e.type===1?"\u624B\u52A8":"\u81EA\u52A8"}},{title:"\u7528\u4F8B\u6570",dataIndex:"total",align:"center",search:!1,render:function(l,e){return(0,t.jsx)(r.Z,{color:"default",children:e.total})}},{title:"\u6210\u529F",dataIndex:"success",align:"center",search:!1,render:function(l,e){return(0,t.jsx)(r.Z,{color:"success",children:e.success})}},{title:"\u5931\u8D25",dataIndex:"fail",align:"center",search:!1,render:function(l,e){return(0,t.jsx)(r.Z,{color:"error",children:e.fail})}},{title:"\u901A\u8FC7\u7387",sorter:!0,dataIndex:"pass_rate",align:"center",search:!1,render:function(l,e){return e.pass_rate<1?(0,t.jsxs)(r.Z,{color:"error",children:[e.pass_rate*100,"%"]}):(0,t.jsxs)(r.Z,{color:"success",children:[e.pass_rate*100,"%"]})}},{title:"\u8017\u65F6",dataIndex:"duration",align:"center",search:!1,render:function(l,e){var f=(0,d.mr)(parseInt(e.duration));return(0,t.jsx)(r.Z,{color:"default",children:f})}},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"start_time",align:"center",width:180,valueType:"dateRange",render:function(l,e){return e.start_time}},{title:"\u64CD\u4F5C",align:"center",key:"option",search:!1,render:function(l,e,f,R){var T="/detail/".concat(e.id);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Link,{to:T,children:"\u67E5\u770B"}),$?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(P.Z,{title:"\u786E\u5B9A\u5220\u9664 #".concat(e.id,"?"),okButtonProps:{danger:!0,type:"default"},cancelButtonProps:{type:"primary"},onConfirm:function(){(0,y.$l)({id:e.id}).then(function(c){return A.current.reload()})},okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)(x.Z,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"})})}):null]})}}];return(0,t.jsx)(u.Z,{actionRef:A,style:{marginTop:"8px"},columns:(0,d.yl)(G,W),request:s()(p()().mark(function i(){var l,e,f,R,T,Z,c=arguments;return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=c.length>0&&c[0]!==void 0?c[0]:{},e=c.length>1?c[1]:void 0,f=c.length>2?c[2]:void 0,R=v()(v()(v()({},l),e),f),m.next=6,(0,y.MQ)(R).catch(function(U){console.log(U)});case 6:return T=m.sent,Z=T.data,m.abrupt("return",{data:Z});case 9:case"end":return m.stop()}},i)})),rowKey:"id",search:{labelWidth:"120"},options:!1,pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u6784\u5EFA\u5386\u53F2"})},F=C,O=n(35280);function B(){return(0,t.jsx)(O._z,{title:!1,children:(0,t.jsx)(F,{})})}var D=B}}]);
