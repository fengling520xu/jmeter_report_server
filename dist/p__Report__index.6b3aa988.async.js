"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[307],{26234:function(A,x,t){t.d(x,{$l:function(){return P},Y6:function(){return j},mr:function(){return E},uf:function(){return S},yl:function(){return g}});var I=t(30381),y=t.n(I);function j(l,u){var a=y()().valueOf(),n=y()().subtract(l,u).valueOf();return{currentStamp:a,agoTimestamp:n}}function E(l){if(l<=60)return"".concat(l,"s");var u=Math.floor(l/60),a=l%60;return"".concat(u,"m").concat(a,"s")}var g=function(u,a){return u.map(function(n){if(n.dataIndex==="project"){var o={},p=a.project;p.map(function(i){o[i]={text:i}}),n.valueEnum=o}if(n.dataIndex==="env"){var f={},v=a.env;v.map(function(i){f[i]={text:i}}),n.valueEnum=f}}),u},P=function(u,a){var n={};return u.map(function(o){o.hasOwnProperty(a)&&(n[o[a]]={text:o[a]})}),n},S=function(u){var a=Math.round(u*100)/100,n=a.toFixed(2),o=n.split("."),p=o[0],f=o[1].padStart(2,"0");return"".concat(p,".").concat(f)}},57008:function(A,x,t){t.r(x),t.d(x,{default:function(){return D}});var I=t(67294),y=t(97983),j=t.n(y),E=t(11281),g=t.n(E),P=t(40794),S=t.n(P),l=t(12741),u=t.n(l),a=t(79561),n=t(20550),o=t(65360),p=t(71577),f=t(22524),v=t(26234),i=t(24061),r=t(85893),F=function(){var Z=(0,I.useRef)(),L=(0,i.useSearchParams)(),N=u()(L,1),V=N[0],z=(0,i.useModel)("base"),K=z.baseInfo,W=V.get("show")==="delete",$=[{dataIndex:"id",title:"\u6784\u5EFAID",align:"center",width:80,search:!1,render:function(s,e){var m="/detail/".concat(e.id);return(0,r.jsxs)(i.Link,{to:m,children:["#",e.id]})}},{title:"\u6240\u5C5E\u9879\u76EE",dataIndex:"project",align:"center",valueType:"select"},{title:"\u6267\u884C\u73AF\u5883",dataIndex:"env",align:"center"},{title:"\u6784\u5EFA\u65B9\u5F0F",dataIndex:"type",align:"center",valueEnum:{1:{text:"\u624B\u52A8"},0:{text:"\u81EA\u52A8"}},render:function(s,e){return e.type===1?"\u624B\u52A8":"\u81EA\u52A8"}},{title:"\u7528\u4F8B\u6570",dataIndex:"total",align:"center",search:!1,render:function(s,e){return(0,r.jsx)(n.Z,{color:"default",children:e.total})}},{title:"\u6210\u529F",dataIndex:"success",align:"center",search:!1,render:function(s,e){return(0,r.jsx)(n.Z,{color:"success",children:e.success})}},{title:"\u5931\u8D25",dataIndex:"fail",align:"center",search:!1,render:function(s,e){return(0,r.jsx)(n.Z,{color:"error",children:e.fail})}},{title:"\u901A\u8FC7\u7387",sorter:!0,dataIndex:"pass_rate",align:"center",search:!1,render:function(s,e){return e.pass_rate<1?(0,r.jsxs)(n.Z,{color:"error",children:[(0,v.uf)(e.pass_rate*100),"%"]}):(0,r.jsxs)(n.Z,{color:"success",children:[(0,v.uf)(e.pass_rate*100),"%"]})}},{title:"\u8017\u65F6",dataIndex:"duration",align:"center",search:!1,render:function(s,e){var m=(0,v.mr)(parseInt(e.duration));return(0,r.jsx)(n.Z,{color:"default",children:m})}},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"start_time",align:"center",width:180,valueType:"dateRange",render:function(s,e){return e.start_time}},{title:"\u64CD\u4F5C",align:"center",key:"option",search:!1,render:function(s,e,m,R){var T="/detail/".concat(e.id);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Link,{to:T,children:"\u67E5\u770B"}),W?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Z,{title:"\u786E\u5B9A\u5220\u9664 #".concat(e.id,"?"),okButtonProps:{danger:!0,type:"default"},cancelButtonProps:{type:"primary"},onConfirm:function(){(0,f.$l)({id:e.id}).then(function(c){return Z.current.reload()})},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)(p.Z,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"})})}):null]})}}];return(0,r.jsx)(a.Z,{actionRef:Z,style:{marginTop:"8px"},columns:(0,v.yl)($,K),request:S()(j()().mark(function d(){var s,e,m,R,T,M,c=arguments;return j()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=c.length>0&&c[0]!==void 0?c[0]:{},e=c.length>1?c[1]:void 0,m=c.length>2?c[2]:void 0,R=g()(g()(g()({},s),e),m),h.next=6,(0,f.MQ)(R).catch(function(G){console.log(G)});case 6:return T=h.sent,M=T.data,h.abrupt("return",{data:M});case 9:case"end":return h.stop()}},d)})),rowKey:"id",search:{labelWidth:"120"},options:!1,pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u6784\u5EFA\u5386\u53F2"})},C=F,O=t(8601);function B(){return(0,r.jsx)(O._z,{title:!1,children:(0,r.jsx)(C,{})})}var D=B}}]);
